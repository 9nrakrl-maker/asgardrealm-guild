<div class="container" align="center">

  <h2>{{ guildName }}</h2>

  <div class="filter-bar">
    <!-- search name -->
    <div class="filter-item">
      <span class="icon">üîç</span>
      <input align="center"
        type="text"
        placeholder="Character Name"
        [(ngModel)]="search"
      />
    </div>
    <br>
    <!-- date picker -->
    <div class="filter-item">
      <span class="icon">üìÖ</span>
      <input align="center"
        type="date"
        [(ngModel)]="selectedDate"
        (change)="onDateChange()"
      />
    </div>
  </div>
  <br>
    <div class="filter-item">
      <span>If you need anything else, Please contact NraK</span>
      <br>
      <span>Updated daily at 01.00 AM.</span>
    </div>
  <table align="center">
    <thead>
      <tr>
        <th width="50">No.</th>
        <th width="100">Character</th>
        <th width="150">Job</th>
        <th width="100">Level</th>
        <th width="100">{{ formatShortDate(todayKey) }}</th>
        <th width="100">{{ formatShortDate(yesterdayKey) }}</th>
        <th width="100">Difference</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let c of filteredAndSortedList(); let i = index"
        class="char-row"
        [ngClass]="{ 'level-up': isLevelUpToday(c.name) }"
        (click)="openCharModal(c.name)">

        <td align="center">{{ i + 1 }}</td>

        <!-- <td align="center" class="td-light"> -->
        <td align="center">
          <img [src]="c.img" width="100" /><br />
          <h2>{{ c.name }}</h2>
        </td>

        <td align="center">{{ c.job }}</td>

        <td align="center">
          Lv. {{ c.level }}
          <span *ngIf="isLevelUpToday(c.name)" class="level-up-badge">‚ñ≤</span>
        </td>

        <td align="center">{{ expToday(c.name) }}%</td>
        <td align="center">{{ expYesterday(c.name) }}%</td>
        <td align="center">{{ diffExpPercent(c.name) }}%</td>
      </tr>
    </tbody>
  </table>
</div>

  <!-- ü™ü Modal -->
  <app-history-modal
    *ngIf="showModal"
    [name]="selectedChar"
    [history]="historyCache"
    (close)="closeModal()">
  </app-history-modal>